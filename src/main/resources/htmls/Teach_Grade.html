<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="type/html; charset=utf-8">
	<title>Grade</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<style type="text/css">
	body{
		padding: 0px;
		margin:0px;
	}
	h1{
		text-align: center;
	}
	.form-group{
		width:20%;
		margin-left: 10%;
	}
	.table-responsive{
		width: 80%;
		position: relative;
		left: 10%; 
	}
	tr{
		height: 38px;
		width: 20%;
	}
	th{
		width:25%;
	}
	button{
		width:5%;
	}
	#btn_edit{
		margin-left: 40%;
	}
	#btn_print{
		margin-left: 10%;
	}
	</style>
	<script type="text/javascript">
	window.onload = function(){
		//send AJAX get the subjects
		var request_subject = new XMLHttpRequest();

		request_subject.open("GET","backend_url");
		request_subject.send();
		request_subject.onreadystatechange = function(){
			if(request_subject.readyState === 4 && request_subject.status === 200){
				alert("success to connect with server");
				var subjArray = JSON.parse(request_subject.responseText);
				addSubject(subjArray);
			}
		}

		//send AJAX get the grades
		var request_grades = new XMLHttpRequest();

		request_grades.open("GET","backend_url?subject:" + document.getElementById("subject").value);
		request_grades.send();
		request_subject.onreadystatechange = function(){
			if(request_subject.readyState === 4 && request_subject.status === 200){
				alert("success to connect with server");
				var gradesArray = JSON.parse(request_grades.responseText);
				addGrades(gradesArray);
			}
		}

		//create<option> for <select> to add subject which can be chosen
		function addSubject(subjArray){
			for (var i = 0; i < subjArray.length; i++) {
				var subj = document.getElementById("subject");
				var option = document.createElement("option");
				option.innerHTML = subjArray[i];
				subj.appendChild(option);
			};
		}
		//add data including ranking, name, stuId, grade
		function addGrades(gradesArray){
				var grades = document.getElementByTagName("tbody");
				var data = document.createElement("tr");
				var ranking = document.createElement("td");
				var name = document.createElement("td");
				var stuId = document.createElement("td");
				var grade = document.createElement("td");

				ranking.innerHTML = gradesArray[0];
				name.innerHTML = gradesArray[1];
				stuId.innerHTML = gradesArray[2];
				grade.innerHTML = gradesArray[3];

				document.grades.appendChild(data);
				document.data.appendChild(ranking);
				document.data.appendChild(name);
				document.data.appendChild(stuId);
				document.data.appendChild(grade);
		}
	}
	</script>
</head>
<body>
	<h1>Grade</h1>
	<div class="form-group">
		<select class="form-control" id="subject">
			<option></option>
		</select>
	</div>
	<div class="table-responsive">
		<table class="table table-striped table-bordered table-hover">
			<thead>
				<tr>
					<th>Ranking</th>
					<th>Name</th>
					<th>StuID</th>
					<th>Grade</th>
					
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>1</td>
					<td>Jerry</td>
					<td>0402001</td>
					<td>96</td>
				</tr>
				<tr>
					<td>2</td>
					<td>Thomas</td>
					<td>0402007</td>
					<td>92</td>
				</tr>
			</tbody>
		</table>
	</div>
	<a href="./Teach_GradeEdit.html"><button class="btn btn-info" name="edit" id="btn_edit">Edit</button></a>
	<button class="btn btn-info" name="print" id="btn_print">Print</button>
</body>
</html>